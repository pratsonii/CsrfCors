# CsrfCors
CSRF and CORS implementation using Angular 13 and Spring Security


Why CSRF?
Only JSESSIONID is not enough to protect state changing endpoints(i.e. POST/PUT/DELETE).

How it is implemented?
-   Here we are intercepting incoming request by adding one more filter after the last filter of Spring Security (i.e FilterSecurityInterceptor).

-   New filter will read csrf cookie (generated by CsrfFilter) and creates new Header(i.e. CSRF-TOKEN-VALUE).

-   UI will receive the response and read this new header from response and store in the session storage (We can use redux to store).

-   For every sub-sequent state changing request, UI will send this csrf token in header.

-   CsrfFilter of Spring security reads this header and compare with its own token.

------------------------------------------------

# Backend Project

-   Run as Springboot app
-   Cors filter is required here to allow request from UI which is in different domain.
-   GET endpoints work without CSRF token header.


-----------------------------------------------

# Frontend Project

-   Start the app : ng serve -o
-   Login using : a as Username and a as password
-   Subsequent request are sent using withCredentials property    
    
    withCredentials property is a boolean value that indicates whether or not cross-site Access-Control requests should be made using credentials such as cookies, authorization headers or TLS client certificates.
